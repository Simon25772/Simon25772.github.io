---
title: 'rust-懒惰的迭代器'
date: 2025-04-28
permalink: /posts/2025/04/rust-懒惰的迭代器/
tags:
  - rust
---
## 适配器

适配器是迭代器上的方法。

## 消费者适配器

消费者是迭代器上的方法，它调用迭代器提供的next()方法消耗迭代器的元素。
例如sum方法，它会拿走迭代器的所有权然后不断调用next方法对里面的元素进行求和并最后返回一个值。

## 迭代器适配器

顾名思义，迭代器适配器会返回一个新的迭代器。
迭代器适配器是惰性的，意味着你需要一个消费者适配器来收尾。
想象过年你想放烟花，迭代器适配器就相当于将烟花连起来，消费者适配器就是将最终的引线打火。
迭代器适配器都是懒惰的，只有配合消费者适配器使用时，才会进行求值。

## So

在使用迭代器时，要清晰的认识到需要用到的方法是迭代型还是消费型适配器，如果一个调用链中没有以消费型适配器结尾，就需要打起精神了，也许，不远处就是一个陷阱在等你跳:)
